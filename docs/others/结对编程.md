# 结对编程

[结对编程](https://baike.baidu.com/item/%E7%BB%93%E5%AF%B9%E7%BC%96%E7%A8%8B/7526152)是一种软件开发技术，就是两个程序员坐在一起，结对进行代码开发。实践表明结对编程有助于提高代码质量、更快地解决问题以及增强知识共享。

在编程初学阶段，使用结对编程的方式，有助于增强编程的信心，提编程兴趣、对代码的理解能力和程序的成功率。

## 结对编程的基础知识

在结对编程实践中，通常有两个角色：

* 驾驶员（The Driver）：主要负责编写代码。
* 导航员（The Navigator）：负责审查代码，思考代码潜在的问题，提供反馈。

<img src="https://raw.githubusercontent.com/hughxusu/lesson-knowledge/develop/images/others/driver_navigator.png" style="zoom:67%;" />

对于新手开发者，驾驶员专注程序的实现，导航员负责监视边界值处理和程序逻辑。

> [!warning]
>
> 集成开发环境一般会提示语法错误，语法错误不需要人为监控。

### 选择合适的合作伙伴

选择结对编程合作伙伴时，主要考虑以下因素：

* 水平相当：两个人水平不能有过大差距，否则会变成老带新，不能实现两个人共同成长。
* 兼容的工作方式：可以有效沟通、相互理解，不会因为某些问题的意见相左而导致摩擦。

### 设定明确的目标

在开始结对编程之前，应该建立明确的任务目标和任务计划。

* 以完成作业题为任务目标。
* 以完成课程设计为任务目标。
* 以大创项目为任务目标。

在确定任务目标后，应该有时间安排和计划，保证在截止时间前完成任务。

> [!warning]
>
> 对于新手开发者，制定计划时不要盲目乐观，要保证时间安排充分。

### 定期轮换角色

驾驶员和导航员的角色应该定期轮换，轮换的常见规则：

* 以时间为基础，30分钟轮换一次角色。
* 已作业题目为基础，每一个题轮换一次。
* 以项目为基础，每个功能轮换一次。
* 以功能为基础，每个函数轮换一次。

> [!warning]
>
> 每人从事同一角色，不应该超过一天时间。

### 有效沟通

结对编程期间，沟通至关重要。开发伙伴都应该积极参与，表达自己的想法，并认真倾听。分享想法、提出问题并公开讨论代码。使用屏幕共享和代码审查平台等协作工具来促进沟通。在编程开始之前，应该对如下问题达成一致：

* 算法问题，对问题的解法和流程达成一致。
* 项目问题，对项目的包含的具体功能达成一致。
* 功能问题，对功能的实现过程、包含的具体函数达成一致。

在此基础上进行编程，不要在编程过程中讨论上述问题，驾驶员和导航员都应该专注代码的实现。

### 采用番茄工作法

番茄工作法是一种时间管理方法，需要集中工作，中间有短暂的休息，非常适合结对编程。一起工作 25-30分钟，然后休息5分钟。在休息期间，讨论你已经完成的事情以及下一步要做的事情。

### 团队调试

调试问题时，团队合作通常会更有效。在尝试识别和解决错误时，两双眼睛比一双眼睛更好。驾驶员和导航员都可以通过建议不同的方法，或提供见解，来帮助解决问题。

### 保持代码整洁

维护干净、结构良好的代码是软件开发的一个基本方面。驾驶员和领航员都应在结对编程期间，积极提倡干净的编码实践。实现这一目标的一些具体方法包括：

* 遵循编码标准：遵守约定俗称的代码规范或团队制定的代码规范。
* 随行重构：如果导航员发现代码可以改进的地方，应该立刻重构。
* 使用描述性变量名称：选择有意义且描述性的变量名称，驾驶员和导航员都应该再次尽量发挥想象力。

### 记录决策

在结对编程期间，应该使用文档和代码注释来记录思考过程。

### 反思和学习

结对编程课程结束后，花点时间反思一下这段经历。讨论哪些方面进展顺利，哪些方面可以改进。这种反思和反馈循环可以帮助结对开发的程序员迅速成长。

## 需要克服的挑战

结对编程期间需要克服一些问题。

### 不平等的贡献

结对编程期间无论如何分配工作都无法保证绝对的公平，双方应该默认这种不平等现象的存在。

同时应该尽量保证工作的公平性。

* 定期转换角色，以确保双方都积极做出贡献。
* 营造一个让合作伙伴都能轻松分享想法的环境。
* 一个人划分工作，另一个人首先选择工作。

### 技术分歧

结对程序员可能对技术解决方案、编码风格或设计决策有不同的看法。

* 尊重彼此的观点并进行建设性讨论。
* 考虑进行快速实验或原型来测试想法。

## 结对编程工具

1. [Live Share](https://learn.microsoft.com/zh-cn/visualstudio/liveshare/)是VS Code的扩展，该工具使VS Code的开发人员能够实时协作。
   * [Live Share下载](https://visualstudio.microsoft.com/zh-hans/services/live-share/)

2. [CodeTogether](https://www.codetogether.com/)可以使[JetBrains](https://www.jetbrains.com.cn/)相关产品完成协作编码工作。
   * [CodeTogether使用](https://www.codetogether.com/resources/three-steps-to-pair-programming-intellij)
